<link rel="import" href="/polymer/polymer.html">

<link rel="import" href="/paper-item/paper-item.html">
<link rel="import" href="/paper-item/paper-item-body.html">

<dom-module id="fm-videos">
    <template>
        <template is="dom-repeat" items="{{videos}}">
            <paper-item>
                <paper-item-body two-line>
                    <div>{{item.title}}</div>
                    <div secondary>{{item.url}}</div>
                </paper-item-body>
            </paper-item>
        </template>
    </template>
    <script>
        /// <reference path="../../typings/tsd.d.ts"/>
        Polymer({
            
            is: "fm-videos",
            
            webSocket: new WebSocket('ws://localhost:8080'),
            
            ready: function() {
                this.videos = [];
                
                this.webSocket.onmessage = function(event) {
                    this.splice('videos', 0, 0, {
                        title: 'URL visit√©e',
                        url: event.data
                    });
                }.bind(this);
            }
        });
    </script>
</dom-module>