<link rel="import" href="/polymer/polymer.html">

<link rel="import" href="/paper-item/paper-item.html">
<link rel="import" href="/paper-item/paper-item-body.html">

<dom-module id="fm-videos">
    <template>
        <template is="dom-repeat" items="{{videos}}">
            <paper-item>
                <paper-item-body two-line>
                    <div>{{item.title}}</div>
                    <div secondary>{{item.url}}</div>
                </paper-item-body>
            </paper-item>
        </template>
    </template>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        /// <reference path="../../typings/tsd.d.ts"/>
        Polymer({
            
            is: "fm-videos",
            
            properties: {
                maxVideos: {
                    type: Number,
                    value: 20
                }
            },
            
            socket: io.connect('http://localhost:8080'),
            
            ready: function() {
                this.videos = [];
                
                this.socket.on('freemedia', function(data) {
                    this.splice('videos', 0, 0, data);
                }.bind(this));
            }
        });
    </script>
</dom-module>